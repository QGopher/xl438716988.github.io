<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Completion is more important than perfection</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="分享个人笔记，见证学习历程">
<meta name="keywords" content="python,scrapy,makedown">
<meta property="og:type" content="website">
<meta property="og:title" content="Completion is more important than perfection">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;index.html">
<meta property="og:site_name" content="Completion is more important than perfection">
<meta property="og:description" content="分享个人笔记，见证学习历程">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Completion is more important than perfection" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Completion is more important than perfection</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">David Xiang</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-【PyQt5】 1.PyQt5入门学习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/05/%E3%80%90PyQt5%E3%80%91%201.PyQt5%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time datetime="2019-12-05T06:25:48.808Z" itemprop="datePublished">2019-12-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/05/%E3%80%90PyQt5%E3%80%91%201.PyQt5%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/">【PyQt5】 1.PyQt5入门学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="一、基本思路结构"><a href="#一、基本思路结构" class="headerlink" title="一、基本思路结构"></a>一、基本思路结构</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.导入需要的包和模块</span></span><br><span class="line">from PyQt5.Qt import * <span class="comment"># 主要包含了常用的包和模块</span></span><br><span class="line">import sys  <span class="comment"># 通过sys.argv可以获取参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.创建一个应用程序对象</span></span><br><span class="line">app = QApplication(sys.argv)</span><br><span class="line">app.arguments()     <span class="comment"># 获取参数</span></span><br><span class="line">qApp.arguments()    <span class="comment"># 全局 qApp获取参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.控件的操作</span></span><br><span class="line"><span class="comment"># 创建控件，设置样式，信号的处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.应用程序的执行，进行到 消息循环（无限循环），检测整个程序的用户操作交互</span></span><br><span class="line">app.exec_()</span><br></pre></td></tr></table></figure>
<h5 id="二、第一个PyQt5程序：hello-world"><a href="#二、第一个PyQt5程序：hello-world" class="headerlink" title="二、第一个PyQt5程序：hello world"></a>二、第一个PyQt5程序：hello world</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.Qt <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">app = QApplication(sys.argv)</span><br><span class="line"></span><br><span class="line">window = QWidget()</span><br><span class="line">window.setWindowTitle(<span class="string">"微博搜索助手"</span>)</span><br><span class="line">window.resize(<span class="number">500</span>,<span class="number">500</span>)</span><br><span class="line">window.move(<span class="number">400</span>,<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">label = QLabel(window)</span><br><span class="line">label.setText(<span class="string">"hello world"</span>)</span><br><span class="line">label.move(<span class="number">200</span>,<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">window.show()</span><br><span class="line">sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>

<h6 id="封装成面向对象："><a href="#封装成面向对象：" class="headerlink" title="封装成面向对象："></a>封装成面向对象：</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.Qt <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Window</span><span class="params">(QWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.setWindowTitle(<span class="string">"学习入门"</span>)</span><br><span class="line">        self.resize(<span class="number">500</span>,<span class="number">500</span>)</span><br><span class="line">        self.setup_ui()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setup_ui</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">import</span> sys</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    window = Window()</span><br><span class="line">    window.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>

<h5 id="设置控件样式："><a href="#设置控件样式：" class="headerlink" title="设置控件样式："></a>设置控件样式：</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setup_ui</span><span class="params">(self)</span>:</span></span><br><span class="line">	<span class="comment"># 加载外部样式qss</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">"QLabel.qss"</span>,<span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        qApp.setStyleSheet(f.read())</span><br><span class="line"></span><br><span class="line">    label = QLabel(self)</span><br><span class="line">    label.setObjectName(<span class="string">"labelStyle"</span>)</span><br><span class="line">    label.setProperty(<span class="string">"notice_level"</span>,<span class="string">"warning"</span>)</span><br><span class="line">    label.setText(<span class="string">"文本设置样式"</span>)</span><br><span class="line">    <span class="comment"># 单独设置样式，优先级高于外部加载样式</span></span><br><span class="line">    <span class="comment"># label.setStyleSheet("font-size:20px;color:red;")</span></span><br></pre></td></tr></table></figure>
<p>外部样式文件QLabel.qss:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">QLabel</span><span class="selector-id">#labelStyle</span> &#123;    </span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">20</span>;</span><br><span class="line">    <span class="attribute">color</span>:yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">QLabel</span><span class="selector-id">#labelStyle</span><span class="selector-attr">[notice_level="warning"]</span> &#123;    </span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="设置控件的父子关系："><a href="#设置控件的父子关系：" class="headerlink" title="设置控件的父子关系："></a>设置控件的父子关系：</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">obj1 = QObject()</span><br><span class="line">obj2 = QObject()</span><br><span class="line">obj1.setParent(obj2)	<span class="comment"># 设置obj2为obj1的父对象 一个对象的父对象只有一个，以后设置的为父对象</span></span><br><span class="line">obj1.parent()			<span class="comment"># 查看obj1的父对象</span></span><br><span class="line">obj2.children()			<span class="comment"># 查看obj2的所有的直接子对象</span></span><br><span class="line"><span class="comment"># 参数1：查找的对象类型；参数2：查找的对象名称；参数3：默认是递归查找#（Qt.FindDirectChildrenOnly- 仅查找直接子对象； Qt.FindChildrenRecursively- 递归查找 默认选项）</span></span><br><span class="line">obj1.findChild(参数<span class="number">1</span>，参数<span class="number">2</span>，参数<span class="number">3</span>)	</span><br><span class="line">obj1.findChildren(参数<span class="number">1</span>，参数<span class="number">2</span>，参数<span class="number">3</span>)	<span class="comment"># 查找所有子对象</span></span><br></pre></td></tr></table></figure>

<h5 id="内存管理机制："><a href="#内存管理机制：" class="headerlink" title="内存管理机制："></a>内存管理机制：</h5><p>所有的对象都是直接或者间接的继承QObject</p>
<p>QObject在一个对象树中组织，当创建一个QObject时，如果使用了其他对象作为其父对象，那么他就会添加到父对象的children列表中</p>
<p>当父对象被销毁时，这么QObject对象就会被销毁，其所有子对象同时也会被销毁</p>
<p>子控件和父控件的关系：显示受父控件约束，父控件销毁子控件也会销毁</p>
<p>如果两个控件都没有父控件，那么都会当做单独的顶级控件显示；</p>
<p>只有顶级控件才能设置标题栏等属性信息；</p>
<h5 id="信号与槽机制："><a href="#信号与槽机制：" class="headerlink" title="信号与槽机制："></a>信号与槽机制：</h5><p>  基本概念：</p>
<pre><code>信号（Signal）和槽（slot）是Qt中的核心机制，主要用于对象之间进行通讯

信号：当一个控件的状态发生改变时，向外界发出的信息

槽：一个执行某些操作的函数或方法

所有继承自QWidget的控件都支持信号与槽机制</code></pre><p>  信号：</p>
<pre><code>控件内置的一些 QPushButton().pressed/clicked

也可以自定义信号：</code></pre><p>  槽：</p>
<pre><code>不同控件内置的槽函数

自定义的函数方法</code></pre><p>  连接方式：</p>
<pre><code>object.信号.connect(槽函数)</code></pre><p>  特性：</p>
<pre><code>一个信号可以连接多个槽函数

一个信号也可以连接多个槽函数

信号的参数可以使任何python类型

一个槽可以监听多个信号</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 信号一 演示</span></span><br><span class="line">obj = QObject()</span><br><span class="line">obj.destroyed.connect(<span class="keyword">lambda</span> :print(<span class="string">"对象已被销毁"</span>))</span><br><span class="line"><span class="comment"># ouput：</span></span><br><span class="line"><span class="comment"># 对象已被销毁</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 信号二 演示</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(name)</span>:</span></span><br><span class="line">	print(<span class="string">"名称发生改变"</span>,name)</span><br><span class="line">obj.objectNameChanged.connect(change)</span><br><span class="line">obj.setObjectName(<span class="string">"名称修改"</span>)</span><br><span class="line"><span class="comment"># ouput：</span></span><br><span class="line"><span class="comment"># 名称发生改变 名称修改</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 断开信号连接</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(name)</span>:</span></span><br><span class="line">	print(<span class="string">"名称发生改变"</span>,name)</span><br><span class="line">obj.objectNameChanged.connect(change)</span><br><span class="line">obj.setObjectName(<span class="string">"名称修改1"</span>)</span><br><span class="line">obj.objectNameChanged.disconnect()</span><br><span class="line">obj.setObjectName(<span class="string">"名称修改2"</span>)</span><br><span class="line"><span class="comment"># ouput：</span></span><br><span class="line"><span class="comment"># 名称发生改变 名称修改1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 临时断开信号连接和恢复信号连接</span></span><br><span class="line">obj = QObject()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(name)</span>:</span></span><br><span class="line">	print(<span class="string">"名称发生改变"</span>,name)</span><br><span class="line">obj.objectNameChanged.connect(change)</span><br><span class="line">obj.setObjectName(<span class="string">"名称修改1"</span>)</span><br><span class="line">obj.blockSignals(<span class="literal">True</span>)      <span class="comment"># 临时阻断信号连接</span></span><br><span class="line">obj.setObjectName(<span class="string">"名称修改2"</span>)</span><br><span class="line">obj.blockSignals(<span class="literal">False</span>)     <span class="comment"># 恢复信号连接</span></span><br><span class="line">obj.setObjectName(<span class="string">"名称修改3"</span>)</span><br><span class="line">obj.SignalsBlocked()		<span class="comment"># 查看连接状态(暂停为True,未暂停未False)</span></span><br><span class="line">obj.obj.receivers(obj.objectNameChanged)	<span class="comment"># 输出当前连接对应槽的数量:1</span></span><br><span class="line"><span class="comment"># ouput：</span></span><br><span class="line"><span class="comment"># 名称发生改变 名称修改1</span></span><br><span class="line"><span class="comment"># 名称发生改变 名称修改3</span></span><br></pre></td></tr></table></figure>

<h5 id=""><a href="#" class="headerlink" title=""></a></h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/12/05/%E3%80%90PyQt5%E3%80%91%201.PyQt5%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/" data-id="ck3sllgwz0000zgts5cafc1be" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-【python】 1.使用虚拟环境搭建项目" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/05/%E3%80%90python%E3%80%91%201.%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE/" class="article-date">
  <time datetime="2019-12-05T05:56:26.372Z" itemprop="datePublished">2019-12-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/05/%E3%80%90python%E3%80%91%201.%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE/">【python】 1.使用虚拟环境搭建项目</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="pipenv安装和虚拟环境的创建"><a href="#pipenv安装和虚拟环境的创建" class="headerlink" title="pipenv安装和虚拟环境的创建"></a>pipenv安装和虚拟环境的创建</h4><h5 id="安装pipenv"><a href="#安装pipenv" class="headerlink" title="安装pipenv"></a>安装pipenv</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pipenv -i https://pypi.douban.com/simple <span class="comment"># 采用豆瓣源全局安装</span></span><br></pre></td></tr></table></figure>

<h5 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pipenv --three  <span class="comment"># 采用python3作为虚拟环境编译版本</span></span><br><span class="line">pipenv shell 	<span class="comment"># 打开虚拟环境</span></span><br></pre></td></tr></table></figure>

<h5 id="安装第三方包模块"><a href="#安装第三方包模块" class="headerlink" title="安装第三方包模块"></a>安装第三方包模块</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv install pyqt5</span><br></pre></td></tr></table></figure>

<blockquote>
<p>直接安装由于直接用的是国外镜像，会出现安装过慢或者安装错误的情况</p>
<p>解决：修改目录下Pipfile文件source下url地址：</p>
<p>​            改为国内镜像地址：<a href="https://pypi.douban.com/simple" target="_blank" rel="noopener">https://pypi.douban.com/simple</a>    （豆瓣源）</p>
<p>​                                               <a href="https://pypi.tuna.tsinghua.edu.cn/simple" target="_blank" rel="noopener">https://pypi.tuna.tsinghua.edu.cn/simple</a>  （清华源）</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/12/05/%E3%80%90python%E3%80%91%201.%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE/" data-id="ck3sllgxo0001zgts7uw130ev" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-【php】 1.在CentOS上搭建LNMP环境" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/04/%E3%80%90php%E3%80%91%201.%E5%9C%A8CentOS%E4%B8%8A%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%83/" class="article-date">
  <time datetime="2019-12-04T12:10:25.817Z" itemprop="datePublished">2019-12-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/04/%E3%80%90php%E3%80%91%201.%E5%9C%A8CentOS%E4%B8%8A%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%83/">【php】 1.在CentOS上搭建LNMP环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="一、准备"><a href="#一、准备" class="headerlink" title="一、准备"></a>一、准备</h4><h5 id="启动epel的源"><a href="#启动epel的源" class="headerlink" title="启动epel的源"></a>启动epel的源</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br></pre></td></tr></table></figure>

<h5 id="关闭SELinux"><a href="#关闭SELinux" class="headerlink" title="关闭SELinux"></a>关闭SELinux</h5><blockquote>
<p>SELinux是严格访问模式，初学Linux建议把此功能关闭，编辑/etc/selinux/config</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX = disabled  		<span class="comment"># 修改此行为disabled</span></span><br></pre></td></tr></table></figure>


<h5 id="关闭SELinux之后需要重启服务器，或者直接用命令"><a href="#关闭SELinux之后需要重启服务器，或者直接用命令" class="headerlink" title="关闭SELinux之后需要重启服务器，或者直接用命令"></a>关闭SELinux之后需要重启服务器，或者直接用命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>

<h4 id="二、开始安装"><a href="#二、开始安装" class="headerlink" title="二、开始安装"></a>二、开始安装</h4><h5 id="安装nginx-mysql-php-fast-cgi："><a href="#安装nginx-mysql-php-fast-cgi：" class="headerlink" title="安装nginx,mysql,php,fast-cgi："></a>安装nginx,mysql,php,fast-cgi：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx mariadb-server mariadb php php-fpm php-mysql</span><br></pre></td></tr></table></figure>

<h5 id="启动nginx-mysql-php-fpm："><a href="#启动nginx-mysql-php-fpm：" class="headerlink" title="启动nginx,mysql,php-fpm："></a>启动nginx,mysql,php-fpm：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl start mariadb</span><br><span class="line">systemctl start php-fpm</span><br></pre></td></tr></table></figure>

<h5 id="设置成开机启动："><a href="#设置成开机启动：" class="headerlink" title="设置成开机启动："></a>设置成开机启动：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb</span><br><span class="line">systemctl <span class="built_in">enable</span> php-fpm</span><br></pre></td></tr></table></figure>

<h5 id="查看运行状态："><a href="#查看运行状态：" class="headerlink" title="查看运行状态："></a>查看运行状态：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure>
<h5 id="查看端口占用状态："><a href="#查看端口占用状态：" class="headerlink" title="查看端口占用状态："></a>查看端口占用状态：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tunlp</span><br></pre></td></tr></table></figure>

<h5 id="在nginx上添加新的站点："><a href="#在nginx上添加新的站点：" class="headerlink" title="在nginx上添加新的站点："></a>在nginx上添加新的站点：</h5><blockquote>
<p>编辑vim /etc/nginx/conf.d/test.com.conf，添加以下内容：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">	listen	80;</span><br><span class="line">	server_name	www.test.com;</span><br><span class="line">	charset	utf-8;</span><br><span class="line">	index index.php;</span><br><span class="line">	location ~ .php$ &#123;</span><br><span class="line">		fastcgi_pass	127.0.0.1:9000;</span><br><span class="line">		fastcgi_index	index.php;</span><br><span class="line">		fastcgi_param	SCRIPT_FILENAME <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">		include fastcgi_params;</span><br><span class="line">	&#125;</span><br><span class="line">	root /var/www/www.test.com/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="创建测试文件："><a href="#创建测试文件：" class="headerlink" title="创建测试文件："></a>创建测试文件：</h5><blockquote>
<p>站点配置好了，我们创建站点的根目录和测试文件：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/www/www.test.com</span><br><span class="line">touch /var/www/www.test.com/index.php</span><br></pre></td></tr></table></figure>

<blockquote>
<p>我们修改此文件 vim /var/www/<a href="http://www.test.com/index.php：" target="_blank" rel="noopener">www.test.com/index.php：</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">phpinfo();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h5 id="然后我们修改目录权限，让此目录属主为nginx："><a href="#然后我们修改目录权限，让此目录属主为nginx：" class="headerlink" title="然后我们修改目录权限，让此目录属主为nginx："></a>然后我们修改目录权限，让此目录属主为nginx：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R nginx:nginx /var/www/www.test.com</span><br></pre></td></tr></table></figure>

<h5 id="查看nginx进程："><a href="#查看nginx进程：" class="headerlink" title="查看nginx进程："></a>查看nginx进程：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux|grep nginx</span><br></pre></td></tr></table></figure>

<h5 id="让nginx重新加载配置："><a href="#让nginx重新加载配置：" class="headerlink" title="让nginx重新加载配置："></a>让nginx重新加载配置：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx	<span class="comment">#用重启命令</span></span><br><span class="line">systemctl reload nginx <span class="comment">#用文件重启命令</span></span><br></pre></td></tr></table></figure>

<h5 id="重启时候出现问题："><a href="#重启时候出现问题：" class="headerlink" title="##### 重启时候出现问题："></a>##### 重启时候出现问题：</h5><blockquote>
<p>启动nginx提示“Job for nginx.service failed because the control process…”错误：</p>
</blockquote>
<blockquote>
<p>原因：配置文件错误,nginx配置文件为<code>/etc/nginx/conf.d/*.conf</code>，也就是<code>/etc/nginx/conf.d/</code>文件夹下的所有以.conf结尾的文件，如果同时存在两个以上的配置文件，那么这两个文件是会同时生效的，也就是nginx会把两个文件的内容拼接在一起，然后当成一个文件来运行，所以，<strong>如果nginx运行出现问题，记得检查/etc/nginx/conf.d/文件夹下所有以.conf结尾的配置文件。</strong></p>
</blockquote>
<blockquote>
<p>解决：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">解决办法：运行systemctl status nginx -l</span><br></pre></td></tr></table></figure>

<blockquote>
<p>找到对应错误并修改</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/12/04/%E3%80%90php%E3%80%91%201.%E5%9C%A8CentOS%E4%B8%8A%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%83/" data-id="ck3sllgxw0002zgtscigy3hvw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-【svn】 1.CentOS7 的svn简单安装与使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/17/%E3%80%90svn%E3%80%91%201.CentOS7%20%E7%9A%84svn%E7%AE%80%E5%8D%95%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="article-date">
  <time datetime="2019-11-17T12:28:48.522Z" itemprop="datePublished">2019-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/17/%E3%80%90svn%E3%80%91%201.CentOS7%20%E7%9A%84svn%E7%AE%80%E5%8D%95%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/">【svn】 1.CentOS7 的svn简单安装与使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="CentOS7-安装svn"><a href="#CentOS7-安装svn" class="headerlink" title="CentOS7 安装svn"></a>CentOS7 安装svn</h3><ol>
<li>安装</li>
</ol>
<ul>
<li>CentOS7下yum命令即可方便的完成安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install subversion</span><br></pre></td></tr></table></figure>



<ul>
<li>测试安装是否成功：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ svnserve --version</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>建立版本库</li>
</ol>
<ul>
<li><p>创建svn数据目录（subversion默认是把/var/svn作为数据根目录的，开机启动默认也是从这里）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkdir -p /var/svn</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>创建版本库：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo svnadmin create /var/svn/wangwa</span><br></pre></td></tr></table></figure>





</li>
</ul>
<ul>
<li>如果删除版本库：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo rm -rf /var/svn/somnus</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>配置svn配置文件</li>
</ol>
<p>每个版本库创建之后都会生成svnserve.conf主要配置文件。编辑它：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /var/svn/somnus/conf/svnserve.conf</span><br></pre></td></tr></table></figure>

<p>编辑示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">anon-access = none                #控制非鉴权用户访问版本库的权限</span><br><span class="line">auth-access = write                 #控制鉴权用户访问版本库的权限</span><br><span class="line">password-db = passwd           #指定用户名口令文件名</span><br><span class="line">authz-db = authz                     #指定权限配置文件名</span><br><span class="line">realm = somnus               #指定版本库的认证域，即在登录时提示的认证域名称</span><br></pre></td></tr></table></figure>



<ol start="4">
<li>编辑svn用户配置文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /var/svn/somnus/conf/passwd</span><br></pre></td></tr></table></figure>

<p>编辑示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[users]</span><br><span class="line">admin = admin                #用户，密码</span><br><span class="line">fuhd = fuhd                #用户，密码</span><br><span class="line">test = test                #用户，密码</span><br></pre></td></tr></table></figure>



<ol start="5">
<li>编辑svn权限控制配置文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /var/svn/somnus/conf/authz</span><br></pre></td></tr></table></figure>

<p>编辑示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[groups]</span><br><span class="line">admin = admin         #admin为用户组,等号之后的admin为用户</span><br><span class="line">test = fuhd,test</span><br><span class="line"></span><br><span class="line">[somnus:/]                #表示根目录（/var/svn/somnus），somnus: 对应前面配置的realm = somnus</span><br><span class="line">@admin = rw            ＃表示admin组对根目录有读写权限,r为读，w为写</span><br><span class="line"></span><br><span class="line">[somnus:/test]         #表示test目录（/var/svn/somnus/test）</span><br><span class="line">@test = rw                #表示test组对test目录有读写权限</span><br></pre></td></tr></table></figure>



<ol start="6">
<li>启动，查看和停止SVN服务</li>
</ol>
<ul>
<li><p>启动SVN服务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#-d : 守护进程  -r : svn数据根目录 </span><br><span class="line">$ sudo svnserve -dr /var/svn            #用root权限启动</span><br></pre></td></tr></table></figure>





</li>
</ul>
<ul>
<li>查看SVN服务：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ps aux|grep svns erve               #默认端口为：3690</span><br></pre></td></tr></table></figure>



<ol start="7">
<li>配置防火墙端口</li>
</ol>
<p>首先要明确CentOS7的默认防火墙为firewallD。subversion的默认端口为3690，如果没有打开会报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo firewall-cmd --permanent -add-port=3690/tcp</span><br><span class="line"> $ sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>




<ol start="8">
<li>检索项目和切换项目的url</li>
</ol>
<ul>
<li>项目检错</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ svn checkout svn://192.168.0.112/XK_Project . #使用 checkout  服务器资源 本地目录</span><br></pre></td></tr></table></figure>

<ul>
<li>切换项目url</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ svn switch --relocate svn://192.168.0.112/XK_Project svn://192.168.0.120/XK_Project   # 使用 switch 迁移 from  to 新的地址</span><br></pre></td></tr></table></figure>




<ol start="9">
<li>设置开机启动</li>
</ol>
<p>在centos7， 设置开机启动：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl enable svnserve.service      #注意：根目录必须是/var/svn 这样才能设置成功！！</span><br><span class="line">#设置开机启动后就可以按下面的方式开启或停止服务了</span><br><span class="line">$ sudo systemctl start svnserve.service</span><br><span class="line">$ sudo systemctl stop svnserve.service</span><br></pre></td></tr></table></figure>

<p>临时关闭：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo setenforce 0</span><br></pre></td></tr></table></figure>

<p>永久关闭：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/sysconfig/selinux</span><br></pre></td></tr></table></figure>


<p>修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX = disable               #值修改为disable.</span><br></pre></td></tr></table></figure>



      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/17/%E3%80%90svn%E3%80%91%201.CentOS7%20%E7%9A%84svn%E7%AE%80%E5%8D%95%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" data-id="ck3sllgxx0003zgtsd6qo5hz7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-【scrapy】 2.scrapy进阶学习之随机请求头、随机代理和数据异步存储" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/12/%E3%80%90scrapy%E3%80%91%202.scrapy%E8%BF%9B%E9%98%B6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%9A%8F%E6%9C%BA%E8%AF%B7%E6%B1%82%E5%A4%B4%E3%80%81%E9%9A%8F%E6%9C%BA%E4%BB%A3%E7%90%86%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BC%82%E6%AD%A5%E5%AD%98%E5%82%A8/" class="article-date">
  <time datetime="2019-11-12T12:49:02.922Z" itemprop="datePublished">2019-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/12/%E3%80%90scrapy%E3%80%91%202.scrapy%E8%BF%9B%E9%98%B6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%9A%8F%E6%9C%BA%E8%AF%B7%E6%B1%82%E5%A4%B4%E3%80%81%E9%9A%8F%E6%9C%BA%E4%BB%A3%E7%90%86%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BC%82%E6%AD%A5%E5%AD%98%E5%82%A8/">【scrapy】 2.scrapy进阶学习之随机请求头、随机代理和数据异步存储</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用scrapy框架完成图片的爬取</p>
<h2 id="一、设置随机请求头中间件"><a href="#一、设置随机请求头中间件" class="headerlink" title="一、设置随机请求头中间件"></a>一、设置随机请求头中间件</h2><h3 id="修改middlewares-py中间件内容"><a href="#修改middlewares-py中间件内容" class="headerlink" title="修改middlewares.py中间件内容"></a>修改middlewares.py中间件内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编写（重写）download中间件</span></span><br><span class="line">class BmwimagesDownloaderMiddleware(object):</span><br><span class="line">    <span class="comment"># Not all methods need to be defined. If a method is not defined,</span></span><br><span class="line">    <span class="comment"># scrapy acts as if the downloader middleware does not modify the</span></span><br><span class="line">    <span class="comment"># passed objects.</span></span><br><span class="line"></span><br><span class="line">    USER_AGENT = &#123;</span><br><span class="line">        <span class="string">'Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; Acoo Browser 1.98.744; .NET CLR 3.5.30729)'</span>,</span><br><span class="line">        <span class="string">'Chrome (AppleWebKit/537.1; Chrome50.0; Windows NT 6.3) AppleWebKit/537.36 (KHTML like Gecko) Chrome/51.0.2704.79 Safari/537.36 Edge/14.14393'</span>,</span><br><span class="line">        <span class="string">'Cyberdog/2.0 (Macintosh; 68k)'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    def process_request(self, request, spider):</span><br><span class="line"></span><br><span class="line">        user_agent = random.choice(self.USER_AGENT)</span><br><span class="line">        request.headers[<span class="string">'User-Agent'</span>] = user_agent</span><br><span class="line"></span><br><span class="line">        <span class="built_in">return</span> None</span><br></pre></td></tr></table></figure>

<h3 id="settings-py开启下载中间件"><a href="#settings-py开启下载中间件" class="headerlink" title="settings.py开启下载中间件"></a>settings.py开启下载中间件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">   <span class="string">'BmwImages.middlewares.BmwimagesDownloaderMiddleware'</span>: 543,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、设置随机代理中间件"><a href="#二、设置随机代理中间件" class="headerlink" title="二、设置随机代理中间件"></a>二、设置随机代理中间件</h2><h3 id="修改middlewares-py中间件内容-1"><a href="#修改middlewares-py中间件内容-1" class="headerlink" title="修改middlewares.py中间件内容"></a>修改middlewares.py中间件内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import random</span><br><span class="line">def process_request(self, request, spider):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置IP代理中间件</span></span><br><span class="line">    <span class="comment"># 如果购买的是代理ip，会得到代理ip及端口列表</span></span><br><span class="line">    proxy_list = []</span><br><span class="line">    proxy = random.choice(proxy_list)</span><br><span class="line">    request.meta[<span class="string">'proxy'</span>] = proxy</span><br></pre></td></tr></table></figure>

<h3 id="settings-py开启下载中间件-1"><a href="#settings-py开启下载中间件-1" class="headerlink" title="settings.py开启下载中间件"></a>settings.py开启下载中间件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">   <span class="string">'BmwImages.middlewares.BmwimagesDownloaderMiddleware'</span>: 543,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="爬取数据存入数据库"><a href="#爬取数据存入数据库" class="headerlink" title="爬取数据存入数据库"></a>爬取数据存入数据库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line">class JsPipeline(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        dbparams = &#123;</span><br><span class="line">            <span class="string">'host'</span>: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">            <span class="string">'port'</span>: 3306,</span><br><span class="line">            <span class="string">'user'</span>: <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'password'</span>: <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'database'</span>: <span class="string">'jianshu'</span>,</span><br><span class="line">            <span class="string">'charset'</span>: <span class="string">'utf8'</span></span><br><span class="line">        &#125;</span><br><span class="line">        self.conn = pymysql.connect(**dbparams)</span><br><span class="line">        self.cursor = self.conn.cursor()</span><br><span class="line"></span><br><span class="line">    def process_item(self, item, spider):</span><br><span class="line">        sql = <span class="string">"INSERT INTO `article` (`title`) VALUES ('%s')"</span>%item[<span class="string">'title'</span>]</span><br><span class="line">        self.cursor.execute(sql)</span><br><span class="line">        self.conn.commit()</span><br><span class="line">        <span class="built_in">return</span> item</span><br></pre></td></tr></table></figure>

<h3 id="修改成爬取异步存储"><a href="#修改成爬取异步存储" class="headerlink" title="修改成爬取异步存储"></a>修改成爬取异步存储</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">from pymysql import cursors</span><br><span class="line">from twisted.enterprise import adbapi</span><br><span class="line"></span><br><span class="line">class JsTwistedPipeline(object):</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        dbparams = &#123;</span><br><span class="line">            <span class="string">'host'</span>: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">            <span class="string">'port'</span>: 3306,</span><br><span class="line">            <span class="string">'user'</span>: <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'password'</span>: <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'database'</span>: <span class="string">'jianshu'</span>,</span><br><span class="line">            <span class="string">'charset'</span>: <span class="string">'utf8'</span>,</span><br><span class="line">            <span class="string">'cursorclass'</span>:cursors.DictCursor</span><br><span class="line">        &#125;</span><br><span class="line">        self.dbpool = adbapi.ConnectionPool(<span class="string">'pymysql'</span>,**dbparams)</span><br><span class="line"></span><br><span class="line">    def process_item(self, item, spider):</span><br><span class="line">        sql = <span class="string">"INSERT INTO `article` (`title`) VALUES ('%s')"</span>%item[<span class="string">'title'</span>]</span><br><span class="line">        defer = self.dbpool.runInteraction(self.insert_item,item)</span><br><span class="line">        defer.addErrback(self.handle_error,item,spider)</span><br><span class="line">        <span class="built_in">return</span> item</span><br><span class="line"></span><br><span class="line">    def insert_item(self,cursor,item):</span><br><span class="line">        sql = <span class="string">"INSERT INTO `article` (`title`) VALUES ('%s')"</span>%item[<span class="string">'title'</span>]</span><br><span class="line">        cursor.execute(sql)</span><br><span class="line"></span><br><span class="line">    def handle_error(self,error,item,spider):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'='</span>*10+<span class="string">"error"</span>+<span class="string">"="</span>*10)</span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'='</span>*10+<span class="string">"error"</span>+<span class="string">"="</span>*10)</span><br></pre></td></tr></table></figure>

<h3 id="使用selenium-webdriver爬取ajax请求的数据"><a href="#使用selenium-webdriver爬取ajax请求的数据" class="headerlink" title="使用selenium+webdriver爬取ajax请求的数据"></a>使用selenium+webdriver爬取ajax请求的数据</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from scrapy.http import HtmlResponse</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">class JsSeleniumWebDriverMiddleware(object):</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        driver_path = r<span class="string">"D:\python\scrapy\study\20191009\chromedriver\chromedriver2-0.exe"</span></span><br><span class="line">        self.driver = webdriver.Chrome(executable_path=driver_path)</span><br><span class="line"></span><br><span class="line">    def process_request(self, request, spider):</span><br><span class="line">        self.driver.get(request.url)</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        try:</span><br><span class="line">            <span class="keyword">while</span> True:</span><br><span class="line">                showmore = self.driver.find_element_by_xpath(<span class="string">"更多"</span>)</span><br><span class="line">                showmore.click()</span><br><span class="line">                time.sleep(0.3)</span><br><span class="line">                <span class="keyword">if</span> not showmore:</span><br><span class="line">                    <span class="built_in">break</span></span><br><span class="line">        except:</span><br><span class="line">            pass</span><br><span class="line"></span><br><span class="line">        <span class="built_in">source</span> = self.driver.page_source</span><br><span class="line">        response = HtmlResponse(url=self.driver.current_url,body=<span class="built_in">source</span>,request=request,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">        <span class="built_in">return</span> response</span><br></pre></td></tr></table></figure>

<h3 id="开启selenium-webdriver中间件"><a href="#开启selenium-webdriver中间件" class="headerlink" title="开启selenium+webdriver中间件"></a>开启selenium+webdriver中间件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">   <span class="string">'BmwImages.middlewares.JsSeleniumWebDriverMiddleware'</span>: 543,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/12/%E3%80%90scrapy%E3%80%91%202.scrapy%E8%BF%9B%E9%98%B6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%9A%8F%E6%9C%BA%E8%AF%B7%E6%B1%82%E5%A4%B4%E3%80%81%E9%9A%8F%E6%9C%BA%E4%BB%A3%E7%90%86%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BC%82%E6%AD%A5%E5%AD%98%E5%82%A8/" data-id="ck3sllgym0005zgts9yryho82" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-【scrapy】 1.使用scrapy框架高效爬取汽车之家图片" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/12/%E3%80%90scrapy%E3%80%91%201.%E4%BD%BF%E7%94%A8scrapy%E6%A1%86%E6%9E%B6%E9%AB%98%E6%95%88%E7%88%AC%E5%8F%96%E6%B1%BD%E8%BD%A6%E4%B9%8B%E5%AE%B6%E5%9B%BE%E7%89%87/" class="article-date">
  <time datetime="2019-11-12T12:38:31.278Z" itemprop="datePublished">2019-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/12/%E3%80%90scrapy%E3%80%91%201.%E4%BD%BF%E7%94%A8scrapy%E6%A1%86%E6%9E%B6%E9%AB%98%E6%95%88%E7%88%AC%E5%8F%96%E6%B1%BD%E8%BD%A6%E4%B9%8B%E5%AE%B6%E5%9B%BE%E7%89%87/">【scrapy】 1.使用scrapy框架高效爬取汽车之家图片</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用scrapy框架完成图片的爬取</p>
<h2 id="一、项目基础配置"><a href="#一、项目基础配置" class="headerlink" title="一、项目基础配置"></a>一、项目基础配置</h2><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject BmwImages</span><br><span class="line"><span class="built_in">cd</span> BmwImages</span><br><span class="line">scrapy genspider bmwSpider car.autohome.com.cn</span><br></pre></td></tr></table></figure>

<h3 id="修改基础配置"><a href="#修改基础配置" class="headerlink" title="修改基础配置"></a>修改基础配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* settings中ROBOTSTXT_OBEY</span><br><span class="line">* DEFAULT_REQUEST_HEADERS</span><br><span class="line">* USER_AGENT</span><br></pre></td></tr></table></figure>

<h3 id="增加start-py启动爬虫文件"><a href="#增加start-py启动爬虫文件" class="headerlink" title="增加start.py启动爬虫文件"></a>增加start.py启动爬虫文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from scrapy import cmdline</span><br><span class="line">cmdline.execute(<span class="string">"scrapy crawl bmwSpider"</span>.split())</span><br></pre></td></tr></table></figure>

<h2 id="二、爬取图片数据"><a href="#二、爬取图片数据" class="headerlink" title="二、爬取图片数据"></a>二、爬取图片数据</h2><h3 id="获取图片类别名称和urls列表"><a href="#获取图片类别名称和urls列表" class="headerlink" title="获取图片类别名称和urls列表"></a>获取图片类别名称和urls列表</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"><span class="keyword">from</span> BmwImages.items <span class="keyword">import</span> BmwimagesItem</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BmwspiderSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'bmwSpider'</span></span><br><span class="line">    allowed_domains = [<span class="string">'car.autohome.com.cn'</span>]</span><br><span class="line">    start_urls = [<span class="string">'https://car.autohome.com.cn/pic/series/66.html'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        uiboxs = response.xpath(<span class="string">"//div[@class='uibox']"</span>)[<span class="number">1</span>:]</span><br><span class="line">        <span class="keyword">for</span> uibox <span class="keyword">in</span> uiboxs:</span><br><span class="line">            category = uibox.xpath(<span class="string">".//div[@class='uibox-title']/a/text()"</span>).get()</span><br><span class="line">            urls = uibox.xpath(<span class="string">".//div//ul/li/a/img/@src"</span>).getall()</span><br><span class="line">            image_urls = list(map(<span class="keyword">lambda</span> x:parse.urljoin(response.url,x.replace(<span class="string">"240x180_0_q95_c42_"</span>,<span class="string">""</span>)),urls))</span><br><span class="line">            item = BmwimagesItem(category=category,image_urls=image_urls)</span><br><span class="line">            <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure>

<h3 id="设置图片管道下载"><a href="#设置图片管道下载" class="headerlink" title="设置图片管道下载"></a>设置图片管道下载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import scrapy</span><br><span class="line"></span><br><span class="line">class BmwimagesItem(scrapy.Item):</span><br><span class="line">    category = scrapy.Field()</span><br><span class="line">    image_urls = scrapy.Field()</span><br><span class="line">    images = scrapy.Field()</span><br></pre></td></tr></table></figure>

<h3 id="settings-py代码"><a href="#settings-py代码" class="headerlink" title="settings.py代码"></a>settings.py代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="comment"># 'BmwImages.pipelines.BmwimagesPipeline': 300,</span></span><br><span class="line">  <span class="string">'scrapy.pipelines.images.ImagesPipeline'</span>: 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">IMAGES_STORE = os.path.join(os.path.dirname(os.path.dirname(__file__)),<span class="string">'images'</span>)</span><br></pre></td></tr></table></figure>


<h3 id="重写方法设置目录"><a href="#重写方法设置目录" class="headerlink" title="重写方法设置目录"></a>重写方法设置目录</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> scrapy.pipelines.images <span class="keyword">import</span> ImagesPipeline</span><br><span class="line"><span class="keyword">from</span> BmwImages <span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BmwImagesPipeline</span><span class="params">(ImagesPipeline)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 请求下载之前调用 发送下载请求</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_media_requests</span><span class="params">(self, item, info)</span>:</span></span><br><span class="line">        request_objs = super(BmwImagesPipeline,self).get_media_requests(item, info)</span><br><span class="line">        <span class="keyword">for</span> request_obj <span class="keyword">in</span> request_objs:</span><br><span class="line">            request_obj.item = item</span><br><span class="line">        <span class="keyword">return</span> request_objs</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 请求之后调用 图片将要被存储时调用获取路径</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">file_path</span><span class="params">(self, request, response=None, info=None)</span>:</span></span><br><span class="line">        path = super(BmwImagesPipeline, self).file_path(request, response, info)</span><br><span class="line">        category = request.item.get(<span class="string">'category'</span>)</span><br><span class="line">        image_store = settings.IMAGES_STORE</span><br><span class="line">        category_path = os.path.join(image_store,category)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(category_path):</span><br><span class="line">            os.mkdir(category_path)</span><br><span class="line"></span><br><span class="line">        image_name = path.replace(<span class="string">"full/"</span>,<span class="string">""</span>)</span><br><span class="line">        image_path = os.path.join(category_path,image_name)</span><br><span class="line">        <span class="keyword">return</span> image_path</span><br></pre></td></tr></table></figure>

<h3 id="使用crawlSpider进行改进，爬取更多图片"><a href="#使用crawlSpider进行改进，爬取更多图片" class="headerlink" title="使用crawlSpider进行改进，爬取更多图片"></a>使用crawlSpider进行改进，爬取更多图片</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line">import scrapy</span><br><span class="line">from urllib import parse</span><br><span class="line">from BmwImages.items import BmwimagesItem</span><br><span class="line">from scrapy.spiders import CrawlSpider, Rule</span><br><span class="line">from scrapy.linkextractors import LinkExtractor</span><br><span class="line"></span><br><span class="line">class BmwspiderSpider(CrawlSpider):</span><br><span class="line">    name = <span class="string">'bmwCrawlSpider'</span></span><br><span class="line">    allowed_domains = [<span class="string">'car.autohome.com.cn'</span>]</span><br><span class="line">    start_urls = [<span class="string">'https://car.autohome.com.cn/pic/series/66.html'</span>]</span><br><span class="line"></span><br><span class="line">    rules = &#123;</span><br><span class="line">        Rule(LinkExtractor(allow=r<span class="string">"https://car.autohome.com.cn/pic/series/66.+"</span>),callback=<span class="string">"parse_images"</span>,follow=True),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    def parse_images(self,response):</span><br><span class="line">        category = response.xpath(<span class="string">"//div[@class='uibox-title']/text()"</span>).getall()</span><br><span class="line">        category = <span class="string">""</span>.join(category).split()</span><br><span class="line">        srcs = response.xpath(<span class="string">"//div[contains(@class,'uibox-con')]/ul/li//img/@src"</span>).getall()</span><br><span class="line">        srcs = list(map(lambda x:parse.urljoin(response.url,x.replace(<span class="string">"240x180_0_q95_c42_"</span>,<span class="string">"1024x0_1_q95_"</span>)),srcs))</span><br><span class="line">        <span class="keyword">if</span> len(category) != 0:</span><br><span class="line">            yield BmwimagesItem(category=category[0], image_urls=srcs)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/12/%E3%80%90scrapy%E3%80%91%201.%E4%BD%BF%E7%94%A8scrapy%E6%A1%86%E6%9E%B6%E9%AB%98%E6%95%88%E7%88%AC%E5%8F%96%E6%B1%BD%E8%BD%A6%E4%B9%8B%E5%AE%B6%E5%9B%BE%E7%89%87/" data-id="ck3sllgyl0004zgtsa5oi7nks" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/12/05/%E3%80%90PyQt5%E3%80%91%201.PyQt5%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/">【PyQt5】 1.PyQt5入门学习</a>
          </li>
        
          <li>
            <a href="/2019/12/05/%E3%80%90python%E3%80%91%201.%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE/">【python】 1.使用虚拟环境搭建项目</a>
          </li>
        
          <li>
            <a href="/2019/12/04/%E3%80%90php%E3%80%91%201.%E5%9C%A8CentOS%E4%B8%8A%E6%90%AD%E5%BB%BALNMP%E7%8E%AF%E5%A2%83/">【php】 1.在CentOS上搭建LNMP环境</a>
          </li>
        
          <li>
            <a href="/2019/11/17/%E3%80%90svn%E3%80%91%201.CentOS7%20%E7%9A%84svn%E7%AE%80%E5%8D%95%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/">【svn】 1.CentOS7 的svn简单安装与使用</a>
          </li>
        
          <li>
            <a href="/2019/11/12/%E3%80%90scrapy%E3%80%91%202.scrapy%E8%BF%9B%E9%98%B6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%9A%8F%E6%9C%BA%E8%AF%B7%E6%B1%82%E5%A4%B4%E3%80%81%E9%9A%8F%E6%9C%BA%E4%BB%A3%E7%90%86%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BC%82%E6%AD%A5%E5%AD%98%E5%82%A8/">【scrapy】 2.scrapy进阶学习之随机请求头、随机代理和数据异步存储</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 David Xiang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>